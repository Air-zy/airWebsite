<!-- minified by avy <3 -->
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Leaderboards Image</title><link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script><style>body{margin:0;padding:0;background:#111;color:#eee;font-family:Montserrat,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh}#boards{display:flex;gap:20px;padding:20px;background:#111}#boards table{border-collapse:collapse;width:160px;font-size:.75em}#boards td,#boards th{border:1px solid #333;padding:4px 6px;text-align:center}#boards th{background:#222;position:sticky;top:0}#boards td.player{text-align:left}#leaderImg{max-width:100%;max-height:100%;display:none}</style></head><body><h1 id="loading-txt">loading...</h1><div id="boards"></div><img id="leaderImg" alt="Leaderboards"><script>const nameCache={};function log(e,...t){console.log(`[Leaderboards] ${e}`,...t)}async function getNameFromUID(e){if(nameCache[e])return log("Cache hit for userId:",e),nameCache[e];log("Fetching username for:",e);try{const t=await fetch(`/api/roblox-user/${e}`);if(!t.ok)throw new Error(`Status ${t.status}`);const n=await t.json();return nameCache[e]=n.name,log("Got username:",e,n.name),n.name}catch(t){return log("Failed to fetch username for:",e,t),nameCache[e]=e,e}}function getWinrate(e,t){return e+t?e/(e+t):0}function renderTable(e,t,n,a,r,o){const s=document.createElement("table");s.innerHTML=`\n        <thead>\n          <tr><th colspan="3">${t}</th></tr>\n          <tr><th>#</th><th>Player</th><th>${t}</th></tr>\n        </thead>\n        <tbody>\n          ${n.slice(0,30).map(((e,t)=>`\n            <tr>\n              <td>${t+1}</td>\n              <td class="player">${o[e.id]||e.id}</td>\n              <td>${r(e[a])}</td>\n            </tr>\n          `)).join("")}\n        </tbody>\n      `,e.appendChild(s)}(async()=>{log("leader generation…");const e=await fetch("api/gam3DB"),t=(await e.json()).PlrDataDSv3;log("plrs raw data:",Object.keys(t).length);const n=Object.entries(t).filter((([e,t])=>Array.isArray(t)&&t.length>=4)).map((([e,t])=>{const n=t[0],a=t[1],r=t[3],o=r*(1+getWinrate(n,a)/2)/100;return{id:parseInt(e,10),wins:n,elo:r,eff:o}}));log("plrs loaded:",n.length);const a=[...n].sort(((e,t)=>t.elo-e.elo)),r=[...n].sort(((e,t)=>t.wins-e.wins)),o=[...n].sort(((e,t)=>t.eff-e.eff)),s=new Set;[a,r,o].forEach((e=>e.slice(0,30).forEach((e=>s.add(e.id)))));const l=Array.from(s);log("unique user IDs to fetch:",l.length),log("fetching usernames in parallel…");const c={};await Promise.all(l.map((async e=>{c[e]=await getNameFromUID(e)}))),log("finished username fetching!");const i=document.getElementById("boards");renderTable(i,"ELO",a,"elo",(e=>e),c),renderTable(i,"Wins",r,"wins",(e=>e),c),renderTable(i,"Efficiency",o,"eff",(e=>e.toFixed(2)),c),document.getElementById("loading-txt")?.remove(),log("starting snapshot…");const d=await html2canvas(i,{backgroundColor:"#111"});log("snapshot complete!");const g=document.getElementById("leaderImg");g.src=d.toDataURL("image/jpeg",.9),g.style.display="block",i.remove(),log("img ready")})().catch((e=>{console.error("Error generating leaderboards:",e)}))</script></body></html>