<!-- minified by avy <3 -->
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Game Data</title><link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><style>:root{color-scheme:dark}body{display:flex;flex-direction:column;align-items:center;font-family:Montserrat;margin:0;padding:20px;background-color:#111;color:#eee}h2{text-align:center}#winrateChart{max-width:100vw;height:80vh!important;margin:0 auto 40px auto;display:block}#gameData{display:flex;flex-wrap:wrap;justify-content:center;gap:10px}#infoData{padding:40px}.entry{font-size:.9em;background-color:#1c1c1c;padding:8px 12px;border:1px solid #333;border-radius:6px;width:200px;text-align:left;box-shadow:0 0 5px rgba(255,255,255,.05);display:flex;flex-direction:column;gap:6px}.entry .row{display:flex;justify-content:space-between}.entry .row div{display:flex;justify-content:space-between}.entry .label{width:30%}.entry .value{width:25%;text-align:right}.entry .rank{width:40%;color:grey;text-align:right}#jsonOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.85);display:flex;justify-content:center;align-items:center;z-index:1000}#jsonOverlayContent{background:#222;color:#fff;padding:20px;min-width:60vw;max-width:90vw;max-height:80vh;overflow:auto;border-radius:10px;box-shadow:0 0 20px rgba(255,255,255,.2)}#jsonOverlayContent button{margin-top:10px;background:#444;color:#fff;border:none;padding:8px 12px;border-radius:5px;cursor:pointer}#jsonOverlayContent span{display:flex;justify-content:space-between}.slot-entry{border:1px solid #444;border-radius:8px;padding:10px;margin-bottom:15px;background-color:#1b1b1b;display:flex;flex-direction:column;flex-wrap:nowrap;gap:8px;font-size:.8em}.itemlist{border:1px solid gray;padding:8px;margin:8px 0;border-radius:4px;display:flex;flex-direction:column;flex-wrap:wrap;max-height:70px;align-content:flex-start;max-width:fit-content}#itemChart{max-width:100%;max-height:400px}</style></head><body><h2>Game Player Data</h2><p>Players with 0 wins and losses are ignored</p><canvas id="winrateChart"></canvas><p id="infoData"></p><div id="gameData"></div><div id="jsonOverlay" style="display:none"><div id="jsonOverlayContent"><span><p id="jsonTitle">header</p><button onclick="closeOverlay()">Close</button></span><div id="jsonDataDisplay"><p>favorite Items <span style="color:grey">amt*(1/globalAmt)*slotLvl</span></p><canvas id="itemChart"></canvas><div id="plrInfo"></div><p>player slots</p><div id="slotContainer"></div></div></div></div><canvas id="bellShapeChart"></canvas><div style="width:90%"><label for="totalGamesSlider">Minimum requirement Total Games Played</label> <input type="range" id="totalGamesSlider" min="0" max="1000" value="1" step="1" style="width:100%"> <span id="sliderValue">1</span></div><div style="width:90%"><label for="eloSlider">Minimum Elo requirement</label> <input type="range" id="eloSlider" min="400" max="1400" value="400" step="1" style="width:100%"> <span id="eloSliderValue">400</span></div><h3>ITEM FREQUENCY CHART</h3><canvas id="itemFrequencyChart"></canvas><script>const chartInstances={},animationCooldown=400;function updateChartWithThrottle(e){const t=e.canvas.id,n=Date.now(),a=n-(chartInstances[t]||{lastUpdate:0}).lastUpdate>400;e.options.animation={duration:a?400:0,easing:a?"easeOutQuart":"linear"},e.update(),chartInstances[t]={chart:e,lastUpdate:n}}function addData(e,t,n){e.data.labels.push(t),e.data.datasets.forEach(((e,t)=>{e.data.push(Array.isArray(n)?n[t]:n)})),updateChartWithThrottle(e)}function removeData(e){e.data.labels.pop(),e.data.datasets.forEach((e=>{e.data.pop()})),updateChartWithThrottle(e)}function setChartData(e,t,n){e.data.labels=t,e.data.datasets.forEach(((e,t)=>{e.data=Array.isArray(n[t])?n[t]:n})),updateChartWithThrottle(e)}async function getNameFromUID(e){try{const t=await fetch(`/api/roblox-user/${e}`);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return(await t.json()).name}catch(e){return console.error("Error fetching user data:",e),null}}function hslToRgb(e,t,n){t/=100,n/=100;const a=(1-Math.abs(2*n-1))*t,o=a*(1-Math.abs(e/60%2-1)),s=n-a/2;let r=0,i=0,l=0;return 0<=e&&e<60?(r=a,i=o,l=0):60<=e&&e<120?(r=o,i=a,l=0):120<=e&&e<180?(r=0,i=a,l=o):180<=e&&e<240?(r=0,i=o,l=a):240<=e&&e<300?(r=o,i=0,l=a):300<=e&&e<360&&(r=a,i=0,l=o),r=Math.round(255*(r+s)),i=Math.round(255*(i+s)),l=Math.round(255*(l+s)),{r:r,g:i,b:l}}function rgbToHsl(e,t,n){e/=255,t/=255,n/=255;const a=Math.max(e,t,n),o=Math.min(e,t,n),s=a-o;let r=0,i=0,l=(a+o)/2;return 0!==s&&(i=s/(1-Math.abs(2*l-1)),a===e?r=(t-n)/s:a===t?r=(n-e)/s+2:a===n&&(r=(e-t)/s+4),r*=60,r<0&&(r+=360)),i*=100,l*=100,{h:r,s:i,l:l}}function getItemColor(e){return`hsl(${e/window.__itemFrequency.size*360}, 70%, 60%)`}function combineColors(e){let t=0,n=0,a=0,o=0;e.forEach((e=>{const s=e[0],r=1+e[1],i=getItemColor(s).match(/hsl\((\d+(\.\d+)?),/);if(i){const e=parseFloat(i[1]),{r:s,g:l,b:d}=hslToRgb(e,100,50);n+=s*r,a+=l*r,o+=d*r,t+=r}}));const s=t>0?n/t:0,r=t>0?a/t:0,i=t>0?o/t:0,{h:l,s:d,l:c}=rgbToHsl(s,r,i);return`hsl(${l}, 60%, 80%)`}function getItemName(e){return window.__itemsData[e-1]?window.__itemsData[e-1].Name:e}function getItemValue(e){return window.__itemsData[e-1]?Object.keys(window.__itemsData[e-1]):e}function getBestFitLine(e){const t=e.length,n=e.reduce(((e,t)=>e+t.x),0),a=e.reduce(((e,t)=>e+t.y),0),o=(t*e.reduce(((e,t)=>e+t.x*t.y),0)-n*a)/(t*e.reduce(((e,t)=>e+t.x*t.x),0)-n*n),s=(a-o*n)/t,r=Math.min(...e.map((e=>e.x))),i=Math.max(...e.map((e=>e.x)));return[{x:r,y:o*r+s},{x:i,y:o*i+s}]}let itemsChartInstance=null;function visualizefrequencyData(){const e=new Map,t=document.getElementById("totalGamesSlider").value,n=document.getElementById("eloSlider").value;for(const a of Object.values(window.__plrData)){const o=a?.[2],s=a[0]+a[1];a[3]<n||null==a[3]||(s<t||Array.isArray(o)&&o.forEach((t=>{t[3].forEach((t=>{e.set(t,(e.get(t)||0)+1)}))})))}const a=Array.from(e.entries()).sort(((e,t)=>t[1]-e[1])),o=a.map((([e])=>e)),s=a.map((([e,t])=>t)),r=document.getElementById("itemFrequencyChart").getContext("2d");itemsChartInstance||(itemsChartInstance=new Chart(r,{type:"bar",data:{labels:[],datasets:[{label:"Item Freq",data:[],backgroundColor:[],borderColor:[],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){return`Item ID: ${e.label}, Count: ${e.raw}`}}}},scales:{x:{title:{display:!0,text:"Count"}},y:{title:{display:!0,text:"ITEM ID"},ticks:{color:"white",autoSkip:!1}}},maintainAspectRatio:!0,aspectRatio:1,indexAxis:"y"}})),setChartData(itemsChartInstance,o.map((e=>getItemName(e)+` | ${e}`)),[s]),itemsChartInstance.data.datasets[0].backgroundColor=o.map((e=>getItemColor(e))),itemsChartInstance.data.datasets[0].borderColor=o.map((e=>getItemColor(e))),itemsChartInstance.update()}let bellCurveChartInstance=null;function visualizeBellCurve(){const e=[],t=window.__plrData,n=document.getElementById("totalGamesSlider").value,a=document.getElementById("eloSlider").value;let o=1e4;for(const[s,r]of Object.entries(t)){const t=r[3],s=r[0]+r[1];t<o&&(o=t),t<a||void 0!==t&&s>0&&s>=n&&e.push(t)}const s=e.reduce(((e,t)=>e+t),0)/e.length,r=(Math.sqrt(e.reduce(((e,t)=>e+Math.pow(t-s,2)),0)/e.length),Math.max(1,Math.floor(e.length))),i=Array(r).fill(1),l=(Math.max(...e)-o)/r;e.forEach((e=>{const t=Math.min(Math.floor((e-o)/l),r-1);i[t]++}));const d=Array(r).fill().map(((e,t)=>Math.floor(o+t*l)+" - "+Math.floor(o+(t+1)*l))),c=document.getElementById("bellShapeChart").getContext("2d");bellCurveChartInstance||(bellCurveChartInstance=new Chart(c,{type:"bar",data:{labels:[],datasets:[{label:"elo distribution",data:[],backgroundColor:"rgba(0, 255, 0, 0.6)",borderColor:"rgba(0, 255, 0, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){return`ELO: ${e.label}, DENSITY: ${e.raw}`}}}},scales:{x:{title:{display:!0,text:"ELO"},beginAtZero:!0},y:{title:{display:!0,text:"DENSITY"},beginAtZero:!0,max:40}}}})),setChartData(bellCurveChartInstance,d,[i]),bellCurveChartInstance.update()}function formItemFreqFromPlrSlots(e){const t=new Map;return e.forEach((e=>{e[3].forEach((e=>{t.set(e,(t.get(e)||0)+1)}))})),t}function calcSlotUniqueness(e){let t=0,n=1;const a=window.__itemFrequency;return e.forEach((e=>{const o=a.get(e)||1;t+=1/o,n+=1})),t/n*1e3}function calcPlayerUniqueness(e){const t=e?.[2];let n=0;return t.forEach((e=>{const t=calcSlotUniqueness(e[3]);t>n&&(n=t)})),n}function getFavorites(e){const t=formItemFreqFromPlrSlots(e),n={};e.forEach(((e,a)=>{const o=e[3];Array.isArray(o)&&o.forEach((a=>{const o=t.get(a)||1,s=1+1/(window.__itemFrequency.get(a)||1);n[a]=(n[a]||0)+o*s*e[4]}))}));const a=Object.entries(n).sort(((e,t)=>t[1]-e[1])),o=a.filter((e=>getItemValue(e[0]).includes("isTalent"))).slice(0,3),s=a.filter((e=>getItemValue(e[0]).includes("isAbility"))).slice(0,3);return[...a.filter((e=>getItemValue(e[0]).includes("Tool")&&!getItemValue(e[0]).includes("isTalent")&&!getItemValue(e[0]).includes("isAbility"))).slice(0,3),...s,...o]}function getColorOfPlr(e){const t=window.__plrData?.[e],n=t?.[2];return combineColors(getFavorites(n))}let itemChartInstance=null;function showPlayerData(e){document.getElementById("jsonTitle").innerHTML=`\n        <a href="https://www.roblox.com/users/${e}" target="_blank"><strong>${e}</strong></a>\n      `,getNameFromUID(e).then((t=>{document.getElementById("jsonTitle").innerHTML=`\n            <a href="https://www.roblox.com/users/${e}" target="_blank"><strong>${t}</strong></a>\n          `})).catch((e=>{console.log("Error:",e)}));const t=window.__plrData?.[e],n=t?.[2],a=e=>{const n=(e=>{let t=Object.values(window.__plrData);return t=t.sort(e),t})(e);return n.findIndex((e=>e===t))+1};function o(e,t){const n=e+t;return n>0?e/n:0}const s=o(t[0],t[1]),r=document.getElementById("plrInfo"),i=`\n            <div class="entry" id="entry-${e}">\n                <div class="row">\n                    <div class="label">Elo:</div>\n                    <div class="value">${t[3]}</div>\n                    <div class="rank">Top #${a(((e,t)=>{const n=Number(e[3])||0;return(Number(t[3])||0)-n}))}</div>\n                </div>\n\n                <div class="row">\n                    <div class="label">Wins:</div>\n                    <div class="value">${t[0]}</div>\n                    <div class="rank">Top #${a(((e,t)=>{const n=Number(e[0])||0;return(Number(t[0])||0)-n}))}</div>\n                </div>\n\n                <div class="row">\n                    <div class="label">Losses:</div>\n                    <div class="value">${t[1]}</div>\n                    <div class="rank">Top #${a(((e,t)=>{const n=Number(e[1])||0;return(Number(t[1])||0)-n}))}</div>\n                </div>\n                \n                <div class="row">\n                    <div class="label">Winrate:</div>\n                    <div class="value">${(100*s).toFixed(1)}</div>\n                    <div class="rank">Top #${a(((e,t)=>{const n=o(e[0],e[1]);return o(t[0],t[1])-n}))}</div>\n                </div>\n            </div>\n        `;r.innerHTML=i;const l=document.getElementById("slotContainer");if(l.innerHTML="",!n||!Array.isArray(n))return void(l.textContent="No valid slots data found.");const d=getFavorites(n),c={labels:d.map((e=>getItemName(e[0]))),datasets:[{label:"Item Frequency",data:d.map((e=>e[1])),backgroundColor:d.map((e=>getItemColor(e[0]))),borderColor:"black",borderWidth:0}]};if(itemChartInstance)itemChartInstance.data=c,itemChartInstance.update();else{const e=document.getElementById("itemChart").getContext("2d");itemChartInstance=new Chart(e,{type:"doughnut",data:c,options:{responsive:!0,plugins:{legend:{position:"top",labels:{color:"white"}},tooltip:{callbacks:{label:function(e){return`${e.label}: ${e.raw}`}}}},maintainAspectRatio:!0,aspectRatio:1}})}n.forEach(((e,t)=>{const n=document.createElement("div");n.classList.add("slot-entry"),n.innerHTML=`\n          <div>Slot ${t+1}</div>\n          <div>Level: ${e[1]} (Progress: ${e[4]}/${e[1]})</div>\n          <div>Exp: ${e[0]}</div>\n          <div>Lives: ${e[5]}</div>\n          <div>Item IDs:</div>\n          <div class="itemlist">\n            ${Array.isArray(e[3])?e[3].map((e=>`<span style="padding: 4px 10px 4px 4px">${e}: ${getItemName(e)}</span>`)).join(""):"<span>None</span>"}\n          </div>\n          <div>Inventory: ${Array.isArray(e[6])?e[6].map((e=>`[${e[0]}, ${e[1]}]`)).join(", "):"None"}</div>\n          <div>Position: [${e[2]?.join(", ")}]</div>\n          <div>Seed: ${e[7]}</div>\n          <div>Date: ${e[9]}</div>\n          <div>Uniqueness Score: ${calcSlotUniqueness(e[3]).toFixed(2)}</div>\n        `,l.appendChild(n)})),document.getElementById("jsonOverlay").style.display="flex"}function closeOverlay(){document.getElementById("jsonOverlay").style.display="none"}function formItemFreq(e){const t=new Map;for(const n of Object.values(e)){const e=n?.[2];n[0],n[1];n[3]<801||null==n[3]||Array.isArray(e)&&e.forEach((e=>{const n=e[3],a=e[4];n.forEach((e=>{t.set(e,(t.get(e)||0)+1/a)}))}))}return console.log(t),t}function formData(e){const t=document.getElementById("gameData"),n=document.getElementById("infoData"),a=e.PlrDataDSv3;if(window.__itemsData=e._Global.Items,window.__Dmgs=e._Global.Dmgs,window.__plrData=a,window.__KeybindDSv5=e.KeybindDSv5,window.__itemFrequency=formItemFreq(a),console.log(window.__itemsData),console.log(e._Global),!a)return void(t.innerHTML="<p>PlrDataDSv3 not found in the data.</p>");const o=[],s=[];let r=0,i=0,l=0,d=0;for(const[e,t]of Object.entries(a))if(Array.isArray(t)&&t.length>=4){const n=t[0],a=t[1],c=t[3],u=n+a,m=u>0?n/u:0;if(u>0&&(r+=1,i+=c),n>0){l+=1,d+=c;const r=calcPlayerUniqueness(t),i=c*(1+m/2)/100;s.push({userId:e,wins:n,losses:a,winrate:m,elo:c,efficiency:i,uniqueness:r}),o.push({y:100*m,x:c,label:e})}}s.sort(((e,t)=>t.uniqueness-e.uniqueness)),t.innerHTML="",n.innerText=`\n      AverageELO: ${(i/r).toFixed(2)}\n      n: ${r}\n      \n      top-${l}-Average: ${(d/l).toFixed(2)}\n      `,s.forEach((e=>{const n=`\n          <div class="entry" id="entry-${e.userId}">\n            <button style="color:${getColorOfPlr(e.userId)}" onclick="showPlayerData('${e.userId}')"><strong>${e.userId}</strong></button>\n\n            <div class="row">\n              <div class="label">Elo:</div>\n              <div class="value">${e.elo}</div>\n            </div>\n            \n            <div class="row">\n              <div class="label">Wins:</div>\n              <div class="value">${e.wins}</div>\n            </div>\n\n            <div class="row">\n              <div class="label">Losses:</div>\n              <div class="value">${e.losses}</div>\n            </div>\n\n            <div class="row">\n              <div class="label">Winrate:</div>\n              <div class="value">${(100*e.winrate).toFixed(1)}%</div>\n            </div>\n\n            <div class="row">\n              <div class="label">Efficiency:</div>\n              <div class="value">${e.efficiency.toFixed(1)}</div>\n            </div>\n            \n             <div class="row">\n              <div class="label">Uniqueness:</div>\n              <div class="value">${e.uniqueness.toFixed(1)}</div>\n            </div>\n          </div>\n        `;t.innerHTML+=n}));const c=document.getElementById("winrateChart").getContext("2d"),u=getBestFitLine(o),m=new Chart(c,{type:"scatter",data:{datasets:[{label:"Winrate vs Elo",data:o,parsing:{xAxisKey:"x",yAxisKey:"y"},backgroundColor:"rgba(0, 200, 255, 0.8)",pointRadius:6,pointHoverRadius:8},{label:"Trend Line",data:u,parsing:{xAxisKey:"x",yAxisKey:"y"},type:"line",borderColor:"orange",borderWidth:2,pointRadius:0,fill:!1}]},options:{plugins:{tooltip:{callbacks:{label:function(e){const t=e.raw.label||"";return t?`User: ${t}, Winrate: ${e.raw.y.toFixed(1)}%, Elo: ${e.raw.x}`:`Winrate: ${e.raw.y.toFixed(1)}%, Elo: ${e.raw.x}`}}}},onClick:(e,t)=>{if(t.length>0){const e=t[0].index,n=m.data.datasets[0].data[e].label,a=document.getElementById(`entry-${n}`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.style.boxShadow="0 0 100px 2px rgba(255,0,0,1)",setTimeout((()=>{a.style.boxShadow="0 0 5px rgba(255,255,255,0.05)"}),1500))}},scales:{y:{title:{display:!0,text:"Winrate (%)"},min:0,max:100,grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{title:{display:!0,text:"Elo"},grid:{color:"rgba(255, 255, 255, 0.1)"}}},maintainAspectRatio:!0,aspectRatio:window.innerWidth/window.innerHeight}});visualizefrequencyData(),visualizeBellCurve()}fetch("api/gam3DB").then((e=>e.json())).then(formData).catch((e=>{document.getElementById("gameData").innerHTML=`<p>Error: ${e.message}</p>`})),document.getElementById("totalGamesSlider").addEventListener("input",(function(){document.getElementById("sliderValue").textContent=this.value,visualizeBellCurve(),visualizefrequencyData()})),document.getElementById("eloSlider").addEventListener("input",(function(){document.getElementById("eloSliderValue").textContent=this.value,visualizeBellCurve(),visualizefrequencyData()}))</script></body></html>