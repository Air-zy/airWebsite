// minified by avy <3
let defaultRootStyle;const spanStyles=new Map;function updateSpansLmode(){const e=document.getElementById("icon"),t=document.querySelectorAll("span");e.classList.contains("fa-moon-o")?t.forEach((e=>{const t=spanStyles.get(e);t&&(e.style.color=t.c,e.style.textShadow=t.s,e.style.textDecoration=t.d)})):t.forEach((e=>{e.style.color="black",e.style.textShadow="none",e.style.textDecoration="underline"}))}document.querySelectorAll("span").forEach((e=>{spanStyles.set(e,{c:e.style.color||"",s:e.style.textShadow||"",d:e.style.textDecoration||""})}));const icons=document.querySelectorAll(".social-media-container .social-medias .fa");function toggleLightMode(){const e=document.getElementById("icon"),t=document.documentElement;e.classList.contains("fa-moon-o")?(e.classList.remove("fa-moon-o"),e.classList.add("fa-sun-o"),t.style.setProperty("color-scheme","light"),t.style.setProperty("--bg-col","#ffffff"),t.style.setProperty("--bg-rgb-full","rgb(255, 255, 255)"),t.style.setProperty("--bg-rgb-half","rgb(226, 226, 226, 0.3)"),t.style.setProperty("--text-grey","grey"),t.style.setProperty("--text-normal","#000000"),t.style.setProperty("--frame-bcol","#EFEFEF"),t.style.setProperty("--frame-bcol2","#e3e3e3")):(e.classList.remove("fa-sun-o"),e.classList.add("fa-moon-o"),t.style.setProperty("color-scheme",defaultRootStyle.colorScheme),t.style.setProperty("--bg-col",defaultRootStyle.bgCol),t.style.setProperty("--bg-rgb-full",defaultRootStyle.bgRgbFull),t.style.setProperty("--bg-rgb-half",defaultRootStyle.bgRgbHalf),t.style.setProperty("--text-grey",defaultRootStyle.textGrey),t.style.setProperty("--text-normal",defaultRootStyle.textNormal),t.style.setProperty("--frame-bcol",defaultRootStyle.frameBcol),t.style.setProperty("--frame-bcol2",defaultRootStyle.frameBcol2)),updateSpansLmode()}function menuTrigger(e){e.classList.toggle("active");const t=document.getElementById("side-bar");t.classList.toggle("open"),localStorage.setItem("sidebarOpen",t.classList.contains("open"))}function updateSidebarState(){const e=document.getElementById("side-bar");if("true"===localStorage.getItem("sidebarOpen")){e.classList.add("open");const t=document.querySelector(".menu-icon");t&&t.classList.add("active")}else e.classList.remove("open")}function lerpString(e,t,o){o=Math.max(0,Math.min(1,o));const n=Math.floor(o*t.length);let a="";for(let o=0;o<Math.max(e.length,t.length);o++)a+=o<n?t[o]||"":e[o]||"";return a}function isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.bottom-t.height<=(window.innerHeight||document.documentElement.clientHeight)}function handleSections(){document.querySelectorAll(".txt-section").forEach((e=>{isInViewport(e)&&e.classList.add("show")}))}async function reloadProjects(){try{const t=await fetch("/api/projects");if(!t.ok)throw new Error("Failed to fetch data");const o=await t.json(),n=new Map(Object.entries(o));function e(e){return e[1].stats.views/e[1].rank}const a=new Map([...n.entries()].sort(((t,o)=>e(o)-e(t)))),s=document.getElementById("projects");s.innerHTML="";let l=0;a.forEach(((e,t)=>setTimeout((()=>{const o=document.createElement("div");o.classList.add("project-container");const n=document.createElement("a");if(n.href=e.url,n.target="_blank",n.classList.add("project-card"),n.addEventListener("click",(e=>{try{fetch("/api/project-edit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"view",value:t})})}catch(e){console.log("[ERROR] project view send",e)}})),e.img){const t=document.createElement("img");t.src=e.img,t.alt=e.alt,window.innerWidth<=600?(t.width=100,t.height=100):(t.width=200,t.height=200),n.appendChild(t)}const a=document.createElement("p");a.textContent=e.title,a.classList.add("proj-title"),n.appendChild(a);const l=document.createElement("p");l.classList.add("proj-stats");const r=document.createElement("i");let c;r.classList.add("fa","fa-eye"),l.append(e.stats.views+" "),l.appendChild(r),n.appendChild(l),c=window.innerWidth<=600?document.createElement("details"):document.createElement("div"),e.text.forEach((e=>{const t=document.createElement("p");let o=e;o=o.replace(/\[([^\]]+)\]\("([^"]+)"\)/g,((e,t,o)=>`<a href="${o}" target="_blank">${t}</a>`)),t.innerHTML=o,c.appendChild(t)})),n.appendChild(c);const i=document.createElement("div");i.classList.add("project-footer"),e.tags.forEach((e=>{const t=document.createElement("p");t.textContent=e,i.appendChild(t)})),o.appendChild(n),o.appendChild(i),s.appendChild(o)}),100*l)))}catch(r){let c="Failed to fetch projects: "+String(r);document.getElementById("projects").innerHTML=c,alert(c)}}icons.forEach(((e,t)=>{e.style.animationDelay=.1*t+"s"})),updateSidebarState(),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("airzy"),t="Airzy",o="Î±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Î¿Ï€ÏÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰Ï€";let n=" ".repeat(5);e.innerText=n;let a=0,s=0;const l=document.documentElement;defaultRootStyle={colorScheme:getComputedStyle(l).getPropertyValue("color-scheme"),bgCol:getComputedStyle(l).getPropertyValue("--bg-col"),bgRgbFull:getComputedStyle(l).getPropertyValue("--bg-rgb-full"),bgRgbHalf:getComputedStyle(l).getPropertyValue("--bg-rgb-half"),textGrey:getComputedStyle(l).getPropertyValue("--text-grey"),textNormal:getComputedStyle(l).getPropertyValue("--text-normal"),frameBcol:getComputedStyle(l).getPropertyValue("--frame-bcol")};const r=setInterval((()=>{s<2?(n=n.substring(0,a)+o.charAt(Math.floor(25*Math.random()))+n.substring(a+1),e.innerText=n,s++):(n=n.substring(0,a)+t.charAt(a)+n.substring(a+1),e.innerText=n,a++,s=0),a>=5&&(setTimeout((()=>{e.classList.add("glow"),handleSections()}),400),clearInterval(r))}),40)}));let projectsLoaded=!1;async function loadProjects(){projectsLoaded||(projectsLoaded=!0,await fetch("projects.html").then((e=>{if(e.ok)return e.text();console.log(e),projectsLoaded=!1})).then((e=>{document.querySelector("#main-content article").insertAdjacentHTML("beforeend",e),updateSpansLmode(),handleSections()})).catch((e=>{projectsLoaded=!1,console.error("Error:",e)})),reloadProjects())}let introsLoaded=!1;async function loadIntro(){introsLoaded||(introsLoaded=!0,await fetch("intro.html").then((e=>{if(e.ok)return e.text();console.log(e),introsLoaded=!1})).then((e=>{document.querySelector("#main-content article").insertAdjacentHTML("beforeend",e),updateSpansLmode(),handleSections()})).catch((e=>{introsLoaded=!1,console.error("Error:",e)})))}const userBehavior={startTime:Date.now()};let attemptedUserValidate=!1,canLoadContent=!0;const mainContentElm=document.getElementById("main-content");function timeDifference(e){const t=new Date,o=new Date(e);console.log(t,o,e);const n=(t-o)/1e3,a=n/60,s=a/60,l=s/24,r=l/30,c=r/12;return n<60?`${Math.floor(n+30)} seconds ago`:a<60?`${Math.floor(a)} minutes ago`:s<24?`${Math.floor(s)} hours ago`:l<30?`${Math.floor(l)} days ago`:r<12?`${Math.floor(r)} months ago`:`${Math.floor(c)} years ago`}let currentStatus,lastOnTimestamp;mainContentElm.addEventListener("scroll",(function(){const e=this,t=e.scrollTop,o=e.scrollHeight-e.clientHeight,n=document.getElementsByTagName("nav")[0],a=document.getElementById("s1");t<800&&(n.style.minHeight=100-t/8+"px"),a.style.transform=`translateY(${-t/6}px)`;const s=document.getElementById("adapt");if(t>700&&t<740&&"develop"==s.innerText){let e=0;const t=setInterval((()=>{e+=.2,s.innerText=lerpString("grow","ADAPT",e),(e>2||"ADAPT"==s.innerText)&&clearInterval(t)}),80)}if(o-t<2e3&&canLoadContent&&(projectsLoaded?introsLoaded||loadIntro():(console.log("LOAD"),loadProjects()),canLoadContent=!1,setTimeout((()=>{canLoadContent=!0}),500)),o-t<200&&0==attemptedUserValidate){attemptedUserValidate=!0;const e={sessionDuration:Date.now()-userBehavior.startTime};fetch("/validate-me",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{const t=document.getElementById("main-email"),o=document.getElementById("main-discord"),n=document.getElementById("main-location");e&&e.valid?(t.textContent=e.message,o.href=e.cord,o.childNodes.forEach((t=>{t.nodeType===Node.TEXT_NODE&&(t.textContent=` "${e.cordN}" on Discord`)})),n.childNodes.forEach((t=>{t.nodeType===Node.TEXT_NODE&&(t.textContent=` ${e.loc}`)}))):e.message?t.textContent=e.message:console.log("user validate err",e)})).catch((e=>{document.getElementById("main-email").textContent="failed to validate human",console.log("user validate:",e)}))}handleSections()}));const mainStatusElm=document.getElementById("main-status"),mainLastSeenElm=document.getElementById("main-last-seen"),eventSource=new EventSource("/events");function animateScroll(e,t,o){const n=performance.now();requestAnimationFrame((function a(s){const l=s-n,r=Math.min(l/o,1),c=t.getBoundingClientRect(),i=c.top-c.height/2+140,d=e.scrollTop,m=i;e.scrollTop=d+.1*m,r<1&&Math.abs(i)>2&&requestAnimationFrame(a)}))}function easeOutQuad(e){return 1-(1-e)*(1-e)}async function scrollTo(e){animateScroll(mainContentElm,e,1e3)}async function toResources(){projectsLoaded||await loadProjects();scrollTo(document.getElementById("projects"));document.getElementById("side-bar").classList.remove("open")}async function toAirzy(){introsLoaded||await loadIntro();scrollTo(document.getElementById("intro-section"));document.getElementById("side-bar").classList.remove("open")}async function toContact(){const e=document.getElementById("contact-frame");let t=null;requestAnimationFrame((function o(n){t||(t=n);const a=Math.min((n-t)/1e3,1),s=128*(1-a);e.style.backgroundColor=`rgb(${s}, ${s}, ${s})`,a<1&&requestAnimationFrame(o)})),scrollTo(e);document.getElementById("side-bar").classList.remove("open")}function openChat(){alert("il code this in later lmao")}eventSource.onmessage=e=>{const t=JSON.parse(e.data);console.log(t);const o=t.status;"offline"==o?(mainStatusElm.innerText=`status: ${o}`,mainLastSeenElm.innerText=`last seen: ${timeDifference(t.lastOn)}`):(mainLastSeenElm.innerText=`last updated: ${timeDifference(t.lastOn)}`,"online"==o?mainStatusElm.innerText=`status: ðŸŸ¢ ${o}`:"dnd"==o?mainStatusElm.innerText=`status: ðŸ”´ ${o}`:"idle"==o&&(mainStatusElm.innerText=`status: ðŸŸ¡ ${o}`)),currentStatus=o,lastOnTimestamp=t.lastOn},eventSource.onerror=e=>{console.log("ES ERR",e),eventSource.close()},setInterval((()=>{currentStatus&&lastOnTimestamp&&(mainLastSeenElm.innerText="offline"===currentStatus?`last seen: ${timeDifference(lastOnTimestamp)}`:`last updated: ${timeDifference(lastOnTimestamp)}`)}),1e3),"/"===window.location.pathname&&window.location.replace("/home");